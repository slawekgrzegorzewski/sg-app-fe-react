query GetAvailableInstitutions($country: String!){
    bankPermissions {
        availableInstitutions(country: $country){
            id
            name
            bic
            transactionTotalDays
            countries
            logo
        }
    }
}

query GetBankPermissions {
    bankPermissions {
        granted {
            publicId
            createdAt
            givenAt
            withdrawnAt
            bankAccounts{
                publicId
                iban
            }
            institutionId
            institution {
                id
                name
                bic
                transactionTotalDays
                countries
                logo
            }
            reference
            ssn
            confirmationLink
            requisitionId
        }
        toProcess {
            publicId
            createdAt
            givenAt
            withdrawnAt
            bankAccounts{
                publicId
                iban
            }
            institutionId
            institution {
                id
                name
                bic
                transactionTotalDays
                countries
                logo
            }
            reference
            ssn
            confirmationLink
            requisitionId
        }
        toRecreate {
            id
            name
            bic
            transactionTotalDays
            countries
            logo
        }
    }
}

mutation StartPermissionRequest(
    $institutionId:String!
    $maxHistoricalDays:Int!
    $redirect:URL!
    $userLanguage:String!
){
    startPermissionRequest(bankPermissionRequest: {
        institutionId: $institutionId,
        maxHistoricalDays: $maxHistoricalDays,
        redirect: $redirect,
        userLanguage: $userLanguage}){
        publicId
        createdAt
        givenAt
        withdrawnAt
        bankAccounts{
            publicId
            iban
        }
        institutionId
        reference
        ssn
        confirmationLink
        requisitionId
    }
}

mutation ConfirmPermission(
    $reference:String!
){
    confirmPermission(confirmPermissionRequest: {reference: $reference})
}

mutation TriggerFetchBankAccountData($bankAccountPublicId: UUID!){
    triggerFetchBankAccountData(fetchBankAccountDataInput: {bankAccountPublicId: $bankAccountPublicId})
}